#!/usr/bin/env ruby
# usage: ./bin/route 'Holland Village' 'Bugis'

require_relative '../src/map_builder'
require_relative '../src/router'
require 'csv'

from = ARGV[0]
to = ARGV[1]

arr = CSV.parse(File.read('./assets/StationMap.csv'))[1..-1]

map = MapBuilder.new.build(arr)

router = Router.new(map)
plan, time = router.time_route(
  from: from,
  to: to,
  line_weight_map: {
    'NS' => 12,
    'NE' => 12,
    '__default' => 10,
  },
  line_changing_cost: 15
)

puts "time: #{time}"
plan.each_with_index do |st, i|
  station, line_code = st
  line_code = plan[i + 1][1] unless line_code

  puts "#{station.name}(#{station.station_code(line_code)})"
end
